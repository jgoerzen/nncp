<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for NNCP (Node to Node copy) -  collection of utilities
simplifying secure store-and-forward files and mail exchanging.

Copyright (C) 2016-2019 Sergey Matveev

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled "Copying conditions". -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Configuration (NNCP)</title>

<meta name="description" content="Configuration (NNCP)">
<meta name="keywords" content="Configuration (NNCP)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="date" content="May 1, 2019">
<link href="index.html#Top" rel="start" title="Top">
<link href="index.html#Top" rel="up" title="Top">
<link href="Call.html#Call" rel="next" title="Call">
<link href="Sources.html#Sources" rel="prev" title="Sources">
<style type="text/css"><!-- body {     margin: auto;     width: 80em;     background-color: #AEBECE; } h1, h2, h3, h4 { text-align: center } h1, h2, h3, h4, strong { color: #900090 } pre { background-color: #CCCCCC } table, th, td { border: 1px solid black } --></style>

</head>

<body lang="en">
<a name="Configuration"></a>
<div class="header">
<p>
Next: <a href="Call.html#Call" rel="next">Call</a>, Previous: <a href="Installation.html#Installation" rel="prev">Installation</a>, Up: <a href="index.html#Top" rel="up">Top</a> &nbsp; </p>
</div>
<hr>
<a name="Configuration-file"></a>
<h2 class="unnumbered">Configuration file</h2>

<p>Example YAML configuration file:
</p>
<pre class="verbatim">spool: /var/spool/nncp
log: /var/spool/nncp/log
notify:
  file:
    from: nncp@localhost
    to: user+file@example.com
  freq:
    from: nncp@localhost
    to: user+freq@example.com
self:
  id: TIJQL...2NGIA
  exchpub: CYVGQ...PSEWQ
  exchprv: 65PUY...MPZ3Q
  signpub: 2NMVC...CMH5Q
  signprv: 555JD...RGD6Y
  noiseprv: D62XU...NKYPA
  noisepub: KIBKK...ESM7Q
neigh:
  self:
    id: TIJQL...2NGIA
    exchpub: CYVGQ...PSEWQ
    signpub: 2NMVC...CMH5Q
    noisepub: KIBKK...ESM7Q
    exec:
      sendmail: [/usr/sbin/sendmail]
  alice:
    id: XJZBK...65IJQ
    exchpub: MJACJ...FAI6A
    signpub: T4AFC...N2FRQ
    noisepub: UBM5K...VI42A
    exec:
      flag: [&quot;/usr/bin/touch&quot;, &quot;-t&quot;]
    incoming: /home/alice/incoming
    onlinedeadline: 1800
    maxonlinetime: 3600
    addrs:
      lan: &quot;[fe80::1234%igb0]:5400&quot;
      internet: alice.com:3389
    calls:
      -
        cron: &quot;*/2 * * * *&quot;
  bob:
    id: 2IZNP...UYGYA
    exchpub: WFLMZ...B7NHA
    signpub: GTGXG...IE3OA
    exec:
      sendmail: [/usr/sbin/sendmail]
      warcer: [/path/to/warcer.sh]
      wgeter: [/path/to/wgeter.sh]
    freq: /home/bob/pub
    freqchunked: 1024
    freqminsize: 2048
    via: [alice]
    rxrate: 10
    txrate: 20
</pre>
<p><strong>spool</strong> field contains an absolute path to <a href="Spool.html#Spool">spool</a>
directory. <strong>log</strong> field contains an absolute path to <a href="Log.html#Log">log</a> file.
</p>
<a name="CfgNotify"></a><p><strong>notify</strong> section contains notification settings for successfully
tossed file and freq packets. Corresponding <strong>from</strong> and
<strong>to</strong> fields will be substituted in notification email message.
<em>neigh/self/exec/sendmail</em> will be used as a local mailer. You can
omit either of those two <em>from</em>/<em>to</em> sections to omit
corresponding notifications, or the whole section at once.
</p>
<p><strong>self</strong> section contains our node&rsquo;s private keypairs.
<strong>exch*</strong> and <strong>sign*</strong> are used during <a href="Encrypted.html#Encrypted">encrypted</a> packet creation. <strong>noise*</strong> are used during <a href="Sync.html#Sync">synchronization protocol</a> working in <a href="nncp_002dcall.html#nncp_002dcall">nncp-call</a>/<a href="nncp_002ddaemon.html#nncp_002ddaemon">nncp-daemon</a>.
</p>
<p><strong>neigh</strong> section contains all known neighbours information. It
always has <strong>self</strong> neighbour that is copy of our node&rsquo;s public
data (public keys). It is useful for copy-paste sharing with your
friends. Each section&rsquo;s key is a human-readable name of the neighbour.
</p>
<p>Except for <em>id</em>, <em>exchpub</em> and <em>signpub</em> each neighbour
node has the following fields:
</p>
<dl compact="compact">
<dt><strong>noisepub</strong></dt>
<dd><p>If present, then node can be online called using <a href="Sync.html#Sync">synchronization protocol</a>. Contains authentication public key.
</p>
<a name="CfgExec"></a></dd>
<dt><strong>exec</strong></dt>
<dd><p>Dictionary consisting of handles and corresponding command line
arguments. In example above there are <code>sendmail</code> handles,
<code>warcer</code>, <code>wgeter</code> and <code>flag</code> one. Remote node
can queue some handle execution with providing additional command line
arguments and the body fed to command&rsquo;s stdin.
</p>
<p><tt>sendmail: [&quot;/usr/sbin/sendmail&quot;, &quot;-t&quot;]</tt> handle, when called by
<tt>echo hello world | nncp-exec OURNODE sendmail ARG0 ARG1 ARG2</tt>
command, will execute:
</p>
<pre class="verbatim">echo hello world |
    NNCP_SELF=OURNODE \
    NNCP_SENDER=REMOTE \
    NNCP_NICE=64 \
    /usr/sbin/sendmail -t ARG0 ARG1 ARG2
</pre>
<a name="CfgIncoming"></a></dd>
<dt><strong>incoming</strong></dt>
<dd><p>Full path to directory where all file uploads will be saved. May be
omitted to forbid file uploading on that node.
</p>
<a name="CfgFreq"></a></dd>
<dt><strong>freq</strong></dt>
<dd><p>Full path to directory from where file requests will queue files for
transmission. May be omitted to forbid freqing from that node.
</p>
</dd>
<dt><strong>freqchunked</strong></dt>
<dd><p>If set, then enable <a href="Chunked.html#Chunked">chunked</a> file transmission during
freqing. This is the desired chunk size in KiBs.
</p>
</dd>
<dt><strong>freqminsize</strong></dt>
<dd><p>If set, then apply <a href="Commands.html#OptMinSize">-minsize</a> option during file
transmission.
</p>
<a name="CfgVia"></a></dd>
<dt><strong>via</strong></dt>
<dd><p>An array of node identifiers that will be used as a relay to that node.
For example <tt>[foo,bar]</tt> means that packet can reach current node
by transitioning through <em>foo</em> and then <em>bar</em> nodes. May be
omitted if direct connection exists and no relaying is required.
</p>
<a name="CfgAddrs"></a></dd>
<dt><strong>addrs</strong></dt>
<dd><p>Dictionary containing known network addresses of the node. Each key is
human-readable name of the link/address. Values are <tt>addr:port</tt>
pairs pointing to <a href="nncp_002ddaemon.html#nncp_002ddaemon">nncp-daemon</a>&rsquo;s listening instance. May be omitted
if either no direct connection exists, or <a href="nncp_002dcall.html#nncp_002dcall">nncp-call</a> is used with
forced address specifying.
</p>
<a name="CfgXxRate"></a></dd>
<dt><strong>rxrate/txrate</strong></dt>
<dd><p>If greater than zero, then at most *rate packets per second will be
sent/received after the handshake. It could be used as crude bandwidth
traffic shaper: each packet has at most 64 KiB payload size. Could be
omitted at all &ndash; no rate limits.
</p>
<a name="CfgOnlineDeadline"></a></dd>
<dt><strong>onlinedeadline</strong></dt>
<dd><p>Online connection deadline of node inactivity in seconds. It is the time
connection considered dead after not receiving/sending any packets and
node must disconnect. By default it is set to 10 seconds &ndash; that means
disconnecting after 10 seconds when no packets received and transmitted.
This can be set to rather high values to keep connection alive (to
reduce handshake overhead and delays), wait for appearing packets ready
to send and notifying remote side about their appearance.
</p>
<a name="CfgMaxOnlineTime"></a></dd>
<dt><strong>maxonlinetime</strong></dt>
<dd><p>If greater than zero, then it is maximal amount of time connect could be
alive. Forcefully disconnect if it is exceeded.
</p>
<a name="CfgCalls"></a></dd>
<dt><strong>calls</strong></dt>
<dd><p>List of <a href="Call.html#Call">call configuration</a>s. Can be omitted if
<a href="nncp_002dcaller.html#nncp_002dcaller">nncp-caller</a> won&rsquo;t be used to call that node.
</p>
</dd>
</dl>
<hr>
<div class="header">
<p>
Next: <a href="Call.html#Call" rel="next">Call</a>, Previous: <a href="Installation.html#Installation" rel="prev">Installation</a>, Up: <a href="index.html#Top" rel="up">Top</a> &nbsp; </p>
</div>



</body>
</html>
