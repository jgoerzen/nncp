<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for NNCP (Node to Node copy) -  collection of utilities
simplifying secure store-and-forward files and mail exchanging.

Copyright (C) 2016-2020 Sergey Matveev

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled "Copying conditions". -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>nncp-file (NNCP)</title>

<meta name="description" content="nncp-file (NNCP)">
<meta name="keywords" content="nncp-file (NNCP)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="date" content="January 23, 2020">
<link href="index.html#Top" rel="start" title="Top">
<link href="Commands.html#Commands" rel="up" title="Commands">
<link href="nncp_002dfreq.html#nncp_002dfreq" rel="next" title="nncp-freq">
<link href="nncp_002dexec.html#nncp_002dexec" rel="prev" title="nncp-exec">
<style type="text/css"><!-- body {     margin: auto;     width: 80em;     background-color: #AEBECE; } h1, h2, h3, h4 { text-align: center } h1, h2, h3, h4, strong { color: #900090 } pre { background-color: #CCCCCC } table, th, td { border: 1px solid black } --></style>
<link rev="made" href="mailto:webmaster@nncpgo.org">
</head>

<body lang="en">
<a name="nncp_002dfile"></a>
<div class="header">
<p>
Next: <a href="nncp_002dfreq.html#nncp_002dfreq" rel="next">nncp-freq</a>, Previous: <a href="nncp_002dexec.html#nncp_002dexec" rel="prev">nncp-exec</a>, Up: <a href="Commands.html#Commands" rel="up">Commands</a> &nbsp; </p>
</div>
<hr>
<a name="nncp_002dfile-1"></a>
<h3 class="section">nncp-file</h3>

<div class="example">
<pre class="example">$ nncp-file [options] [-chunked INT] SRC NODE:[DST]
</pre></div>

<p>Send <samp>SRC</samp> file to remote <samp>NODE</samp>. <samp>DST</samp> specifies
destination file name in remote&rsquo;s <a href="Configuration.html#CfgIncoming">incoming</a>
directory. If this file already exists there, then counter will be
appended to it.
</p>
<p>This command queues file in <a href="Spool.html#Spool">spool</a> directory immediately
(through the temporary file of course) &ndash; so pay attention that sending
2 GiB file will create 2 GiB outbound encrypted packet.
</p>
<p>If <samp>SRC</samp> equals to <samp>-</samp>, then create an encrypted temporary
file and copy everything taken from stdin to it and use for outbound
packet creation. Pay attention that if you want to send 1 GiB of data
taken from stdin, then you have to have more than 2 GiB of disk space
for that temporary file and resulting encrypted packet. You can control
where temporary file will be stored using <code>TMPDIR</code> environment
variable. Encryption is performed in AEAD mode with
<a href="https://cr.yp.to/chacha.html">ChaCha20</a>-<a href="https://en.wikipedia.org/wiki/Poly1305">Poly1305</a>
algorithms. Data is splitted on 128 KiB blocks. Each block is encrypted
with increasing nonce counter.
</p>
<p>If <samp>SRC</samp> points to directory, then
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html#tag_20_92_13_01">pax archive</a>
will be created on the fly with directory contents and destination
filename <samp>.tar</samp> appended. It <strong>won&rsquo;t</strong> contain any entities
metainformation, but modification time with the names. UID/GID are set
to zero. Directories have 777 permissions, files have 666, for being
friendly with <code>umask</code>. Also each entity will have comment like
<tt>Autogenerated by NNCP version X.Y.Z built with goXXX</tt>.
</p>
<p>If <samp>-chunked</samp> is specified, then source file will be split
<a href="Chunked.html#Chunked">on chunks</a>. <samp>INT</samp> is the desired chunk size in
KiBs. This mode is more CPU hungry. Pay attention that chunk is saved in
spool directory immediately and it is not deleted if any error occurs.
<samp>-minsize</samp> option is applied per each chunk. Do not forget about
<a href="Chunked.html#ChunkedZFS">possible</a> ZFS deduplication issues. Zero
<samp>-chunked</samp> disables chunked transmission.
</p>
<p>If <a href="Configuration.html#CfgNotify">notification</a> is enabled on the remote side for
file transmissions, then it will sent simple letter after successful
file receiving.
</p>
<hr>
<div class="header">
<p>
Next: <a href="nncp_002dfreq.html#nncp_002dfreq" rel="next">nncp-freq</a>, Previous: <a href="nncp_002dexec.html#nncp_002dexec" rel="prev">nncp-exec</a>, Up: <a href="Commands.html#Commands" rel="up">Commands</a> &nbsp; </p>
</div>



</body>
</html>
